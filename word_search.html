<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Word Search Adventure</title>
  <style>
    /* Core styling */
    body { 
      font-family: Arial, sans-serif; 
      padding: 0; 
      margin: 0;
      background-color: #f5f5f5;
      color: #333;
    }
    
    /* Game container - holds all screens */
    #game-container {
      max-width: 1000px;
      margin: 0 auto;
      min-height: 100vh;
      position: relative;
    }
    
    /* Screen styling - base for all game screens */
    .screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: none;
    padding: 20px;
    box-sizing: border-box;
    }
    
    /* Active screen */
    .screen.active {
      display: block;
    }
    
    /* Loading Indicator */
    #loading-indicator {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    
    .loader {
      border: 5px solid #f3f3f3;
      border-top: 5px solid #3498db;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      animation: spin 2s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Title screen styling */
    #title-screen {
      background: linear-gradient(135deg, #6e8efb, #a777e3);
      color: white;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    
    #title-screen h1 {
      font-size: 48px;
      margin-bottom: 20px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
      text-align: center;
    }
    
    #title-screen p {
      font-size: 20px;
      margin-bottom: 40px;
      max-width: 600px;
      text-align: center;
    }
    
    /* Backstory screen styling */
    #backstory-screen {
      background-color: #f8f1e3;
      padding: 40px;
      text-align: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    
    #backstory-screen .story-container {
      max-width: 700px;
      margin: 0 auto;
      background-color: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    
    #backstory-screen h2 {
      font-size: 32px;
      margin-bottom: 20px;
      color: #555;
    }
    
    #backstory-screen p {
      font-size: 18px;
      line-height: 1.6;
      margin-bottom: 20px;
      text-align: left;
    }
    
    /* Empty book screen styling */
    #empty-book-screen {
      background-color: #e6e6e6;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    
    .book-container {
      width: 70%;
      max-width: 800px;
      aspect-ratio: 4/3;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 0 30px rgba(0,0,0,0.2);
      padding: 40px;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .book-spine {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 40px;
      background-color: #8b4513;
      border-radius: 10px 0 0 10px;
    }
    
    .book-pages {
      text-align: center;
      width: 80%;
    }
    
    .book-pages h2 {
      font-size: 28px;
      color: #aaa;
      margin-bottom: 20px;
    }
    
    .book-pages p {
      font-size: 18px;
      color: #888;
      font-style: italic;
    }
    
    /* Library screen styling */
    #library-screen {
      background-color: #2c3e50;
      color: white;
      padding: 40px;
      text-align: center;
      min-height: 100vh;
    }
    
    #library-screen h2 {
      font-size: 36px;
      margin-bottom: 40px;
    }
    
    .genre-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 20px;
      max-width: 900px;
      margin: 0 auto;
    }
    
    .genre-card {
      background-color: white;
      color: #333;
      border-radius: 10px;
      padding: 20px;
      text-align: center;
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .genre-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }
    
    .genre-card h3 {
      font-size: 24px;
      margin-bottom: 10px;
    }
    
    .genre-card p {
      font-size: 14px;
      color: #666;
    }
    
    /* Puzzle screen contains original word search game */
    #puzzle-screen {
      padding: 20px;
      min-height: 100vh;
    }
    
    /* Header */
    .book-title { 
      font-size: 24px; 
      text-align: center; 
      margin-bottom: 20px; 
    }
    
    /* Game sections */
    .game-area { 
      display: flex; 
      margin-bottom: 20px; 
    }
    
    .story-container { 
      flex: 1; 
      padding: 15px; 
      margin-right: 20px; 
      border-right: 1px solid #ddd;
      max-height: 500px;
      overflow-y: auto;
    }
    
    .story-content {
      line-height: 1.6;
      font-size: 16px;
    }
    
    .grid-container { 
      flex: 2; 
      margin-right: 20px; 
    }
    
    .words-container { 
      flex: 1; 
    }
    
    /* Grid styling */
    .grid { 
      display: grid; 
      width: 100%; 
      border: 2px solid #333; 
    }
    
    .grid-cell { 
      display: flex; 
      align-items: center; 
      justify-content: center;
      font-weight: bold; 
      font-size: 20px; 
      border: 1px solid #ddd;
      user-select: none; 
      cursor: pointer; 
      aspect-ratio: 1 / 1;
    }
    
    .grid-cell.selected { 
      background-color: #b3e0ff; 
    }
    
    .grid-cell.correct { 
      background-color: #93d3a2; 
    }
    
    /* Word list styling */
    .word-list { 
      list-style-type: none; 
      padding: 0; 
    }
    
    .word-list li { 
      padding: 8px; 
      border-bottom: 1px solid #eee; 
    }
    
    .word-list li.found { 
      text-decoration: line-through; 
      color: #999; 
    }
    
    /* Timer styling */
    .timer-container { 
      position: relative; 
      height: 20px; 
      background-color: #eee; 
      margin-bottom: 20px; 
    }
    
    .timer-bar { 
      background-color: #4CAF50; 
      height: 100%; 
      width: 100%; 
      transition: width 1s linear; 
    }
    
    /* Controls */
    .controls { 
      display: flex; 
      justify-content: space-between; 
    }
    
    /* Popup panels for puzzle game */
    .panel { 
      position: fixed; 
      top: 50%; 
      left: 50%; 
      transform: translate(-50%, -50%);
      background: white; 
      padding: 20px; 
      border-radius: 8px; 
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      text-align: center; 
      display: none; 
      max-width: 80%; 
      width: 500px;
      z-index: 1000;
    }
    
    /* Shared button styling */
    button {
      padding: 12px 25px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
      transition: background-color 0.2s;
      margin: 10px;
    }
    
    button:hover {
      background-color: #45a049;
    }
    
    button.large {
      font-size: 20px;
      padding: 15px 30px;
    }
    
    button.secondary {
      background-color: #f0f0f0;
      color: #333;
    }
    
    button.secondary:hover {
      background-color: #e0e0e0;
    }
    
    /* Responsive design */
    @media (max-width: 768px) {
      .game-area {
        flex-direction: column;
      }
      
      .story-container {
        margin-right: 0;
        margin-bottom: 20px;
        border-right: none;
        border-bottom: 1px solid #ddd;
        max-height: 200px;
      }
      
      .genre-container {
        grid-template-columns: 1fr;
      }
      
      #title-screen h1 {
        font-size: 36px;
      }
      
      .book-container {
        width: 90%;
      }
    }
  </style>
</head>
<body>
  <!-- Loading Indicator -->
  <div id="loading-indicator">
    <div class="loader"></div>
  </div>
  
  <div id="game-container">
    <!-- Title Screen -->
    <div id="title-screen" class="screen active">
      <h1>Word Search Adventure</h1>
      <p>Discover hidden words and help restore the lost books of knowledge</p>
      <button id="new-game-btn" class="large">New Game</button>
      <button id="continue-btn" class="secondary">Continue</button>
    </div>
    
    <!-- Backstory Screen -->
    <div id="backstory-screen" class="screen">
      <div class="story-container">
        <h2>The Lost Library</h2>
        <p>In a world where words have begun to fade from existence, you've been chosen as the Keeper of Words. The ancient library that once housed all knowledge has been cursed, and the words have vanished from its many books.</p>
        <p>Your task is to find these lost words and restore them to their rightful places. Only then can knowledge flow freely once more.</p>
        <p>Your journey begins now, Keeper. The future of knowledge rests in your hands.</p>
      </div>
      <button id="continue-to-book-btn">Continue</button>
    </div>
    
    <!-- Empty Book Screen -->
    <div id="empty-book-screen" class="screen">
      <div class="book-container">
        <div class="book-spine"></div>
        <div class="book-pages">
          <h2>The Book Awaits Its Words</h2>
          <p>Only by finding the hidden words can you restore this book to its former glory.</p>
        </div>
      </div>
      <button id="continue-to-library-btn">Enter the Library</button>
    </div>
    
    <!-- Library Screen (Genre Selection) -->
    <div id="library-screen" class="screen">
      <h2>The Great Library</h2>
      <p>Choose a section of the library to explore:</p>
      <div class="genre-container">
        <div class="genre-card" data-genre="nature">
          <h3>Nature</h3>
          <p>Explore the natural world through words about animals, plants, and landscapes.</p>
        </div>
        <div class="genre-card" data-genre="fantasy">
          <h3>Fantasy</h3>
          <p>Discover magical creatures, enchanted places, and heroic adventures.</p>
        </div>
        <div class="genre-card" data-genre="science">
          <h3>Science</h3>
          <p>Uncover terms from astronomy, chemistry, biology, and more.</p>
        </div>
        <div class="genre-card" data-genre="history">
          <h3>History</h3>
          <p>Find words related to historical events, figures, and places.</p>
        </div>
      </div>
    </div>
    
    <!-- Puzzle Screen (Original Word Search Game) -->
    <div id="puzzle-screen" class="screen">
      <h1 class="book-title" id="book-title">Book Title Here</h1>
      
      <div class="timer-container">
        <div class="timer-bar" id="timer-bar"></div>
      </div>
      
      <div class="game-area">
        <div class="story-container">
          <div class="story-content" id="story-excerpt">
            Story excerpt will appear here.
          </div>
        </div>
        
        <div class="grid-container">
          <div class="grid" id="word-grid"></div>
        </div>
        
        <div class="words-container">
          <ul class="word-list" id="word-list"></ul>
        </div>
      </div>
      
      <div class="controls">
        <button id="pause-btn">Pause</button>
        <button id="return-library-btn">Return to Library</button>
      </div>
    </div>
  </div>
  
  <!-- Win Panel -->
  <div class="panel" id="win-panel">
    <h2>Congratulations!</h2>
    <p>You found all the words and restored this book!</p>
    <button id="next-book-btn">Find Another Book</button>
    <button id="return-to-library-btn">Return to Library</button>
  </div>
  
  <!-- Lose Panel -->
  <div class="panel" id="lose-panel">
    <h2>Time's Up!</h2>
    <p>You didn't find all the words in time.</p>
    <button id="try-again-btn">Try Again</button>
    <button id="different-book-btn">Choose Different Book</button>
  </div>
  
  <!-- Pause Panel -->
  <div class="panel" id="pause-panel">
    <h2>Game Paused</h2>
    <button id="resume-btn">Resume</button>
    <button id="restart-btn">Restart</button>
    <button id="exit-to-library-btn">Exit to Library</button>
  </div>
  
  <!-- Instructions Panel -->
  <div class="panel" id="instructions-panel">
    <h2>How to Play</h2>
    <ul style="text-align: left; margin-bottom: 20px;">
      <li>Find all the words from the list on the right</li>
      <li>Click and drag to select letters in a straight line</li>
      <li>Words can go horizontally, vertically, or diagonally</li>
      <li>Words can also be spelled backwards</li>
      <li>Find all the words before the timer runs out!</li>
    </ul>
    <button id="start-playing-btn">Start Playing</button>
  </div>

  <script src="wordSearchGame.js"></script>
</body>
</html> 